import{_ as n,c as a,a as e,o as l}from"./app-qwDAWgIM.js";const t={};function p(i,s){return l(),a("div",null,s[0]||(s[0]=[e(`<blockquote><p>âœ… Java åº”ç”¨å†™æ—¥å¿—æ–‡ä»¶ â†’<br> âœ… Filebeat é‡‡é›†å¹¶ <strong>å‹ç¼© + æ‰¹é‡å‘é€</strong> â†’<br> âœ… Logstash å¤„ç† â†’<br> âœ… Elasticsearch å­˜å‚¨ â†’<br> âœ… Kibana æŸ¥çœ‹</p></blockquote><hr><h2 id="ğŸ“-é¡¹ç›®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ğŸ“-é¡¹ç›®ç»“æ„"><span>ğŸ“ é¡¹ç›®ç»“æ„</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">elk-demo/</span>
<span class="line">â”œâ”€â”€ docker-compose.yml</span>
<span class="line">â”œâ”€â”€ filebeat.yml</span>
<span class="line">â”œâ”€â”€ logstash.conf</span>
<span class="line">â”œâ”€â”€ logs/</span>
<span class="line">â”‚   â””â”€â”€ app.log</span>
<span class="line">â”œâ”€â”€ src/</span>
<span class="line">â”‚   â””â”€â”€ main/java/DemoApp.java</span>
<span class="line">â””â”€â”€ pom.xml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-1-docker-compose-yml-elk-filebeat" tabindex="-1"><a class="header-anchor" href="#âœ…-1-docker-compose-yml-elk-filebeat"><span>âœ… 1. <code>docker-compose.yml</code>ï¼ˆELK + Filebeatï¼‰</span></a></h2><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.8&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>7.17.18</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> elasticsearch</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> discovery.type=single<span class="token punctuation">-</span>node</span>
<span class="line">      <span class="token punctuation">-</span> xpack.security.enabled=false</span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;</span></span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;9200:9200&quot;</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> esdata<span class="token punctuation">:</span>/usr/share/elasticsearch/data</span>
<span class="line">      <span class="token punctuation">-</span> ./logs<span class="token punctuation">:</span>/usr/share/elasticsearch/logs <span class="token comment"># å…±äº«æ—¥å¿—ç›®å½•</span></span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elk</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">kibana</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/kibana/kibana<span class="token punctuation">:</span>7.17.18</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> kibana</span>
<span class="line">    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elasticsearch</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ELASTICSEARCH_HOSTS=http<span class="token punctuation">:</span>//elasticsearch<span class="token punctuation">:</span><span class="token number">9200</span></span>
<span class="line">      <span class="token punctuation">-</span> xpack.security.enabled=false</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;5601:5601&quot;</span></span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elk</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">logstash</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/logstash/logstash<span class="token punctuation">:</span>7.17.18</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> logstash</span>
<span class="line">    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elasticsearch</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./logstash.conf<span class="token punctuation">:</span>/usr/share/logstash/pipeline/logstash.conf</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;5044:5044&quot;</span> <span class="token comment"># Filebeat ä½¿ç”¨</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> xpack.monitoring.enabled=false</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elk</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">filebeat</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/beats/filebeat<span class="token punctuation">:</span>7.17.18</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> filebeat</span>
<span class="line">    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> logstash</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./filebeat.yml<span class="token punctuation">:</span>/usr/share/filebeat/filebeat.yml<span class="token punctuation">:</span>ro</span>
<span class="line">      <span class="token punctuation">-</span> ./logs<span class="token punctuation">:</span>/usr/share/filebeat/logs<span class="token punctuation">:</span>ro <span class="token comment"># æŒ‚è½½æ—¥å¿—ç›®å½•</span></span>
<span class="line">    <span class="token key atrule">user</span><span class="token punctuation">:</span> root</span>
<span class="line">    <span class="token key atrule">command</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">[</span><span class="token string">&quot;sh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;chmod 644 /usr/share/filebeat/filebeat.yml &amp;&amp; filebeat -e&quot;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> elk</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">esdata</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">elk</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-2-filebeat-yml-å¯ç”¨å‹ç¼©-æ‰¹é‡-å¤šè¡Œ" tabindex="-1"><a class="header-anchor" href="#âœ…-2-filebeat-yml-å¯ç”¨å‹ç¼©-æ‰¹é‡-å¤šè¡Œ"><span>âœ… 2. <code>filebeat.yml</code>ï¼ˆå¯ç”¨å‹ç¼© + æ‰¹é‡ + å¤šè¡Œï¼‰</span></a></h2><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¤šä¸ªæœåŠ¡ç›‘å¬åªéœ€å¤åˆ¶- type</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log</span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> /usr/share/filebeat/logs/app.log <span class="token comment"># â†â†â† æ—¥å¿—æ–‡ä»¶åœ°å€ dockerä¸‹éœ€è¦æŒ‚è½½æ˜ å°„å®¿ä¸»æœºåœ°å€  è¯¦è§docker-compose</span></span>
<span class="line">    <span class="token key atrule">fields</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">log_type</span><span class="token punctuation">:</span> java<span class="token punctuation">-</span>app</span>
<span class="line">      <span class="token key atrule">service</span><span class="token punctuation">:</span> demo<span class="token punctuation">-</span>service</span>
<span class="line">    <span class="token comment"># åˆå¹¶å¤šè¡Œï¼ˆå¦‚ Java å¼‚å¸¸ï¼‰</span></span>
<span class="line">    <span class="token key atrule">multiline.pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^\\s+(at|\\.{3})\\b|^Caused by:&#39;</span></span>
<span class="line">    <span class="token key atrule">multiline.negate</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">multiline.match</span><span class="token punctuation">:</span> after</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç¦ç”¨æ¨¡å—</span></span>
<span class="line"><span class="token key atrule">filebeat.config.modules</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">path</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>path.config<span class="token punctuation">}</span>/modules.d/<span class="token important">*.yml</span></span>
<span class="line">  <span class="token key atrule">reload.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¾“å‡ºåˆ° Logstash</span></span>
<span class="line"><span class="token key atrule">output.logstash</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;logstash:5044&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token comment"># âœ… å¯ç”¨ Gzip å‹ç¼©</span></span>
<span class="line">  <span class="token key atrule">compression_level</span><span class="token punctuation">:</span> <span class="token number">6</span></span>
<span class="line">  <span class="token comment"># âœ… æ‰¹é‡å‘é€ï¼ˆæœ€å¤š 2048 æ¡ï¼‰</span></span>
<span class="line">  <span class="token key atrule">bulk_max_size</span><span class="token punctuation">:</span> <span class="token number">2048</span></span>
<span class="line">  <span class="token comment"># å‘é€é—´éš”ï¼ˆå³ä½¿ä¸å¤Ÿä¸€æ‰¹ä¹Ÿå‘ï¼‰</span></span>
<span class="line">  <span class="token key atrule">flush_interval</span><span class="token punctuation">:</span> 5s</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ€§èƒ½ä¼˜åŒ–</span></span>
<span class="line"><span class="token key atrule">queue.mem</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">events</span><span class="token punctuation">:</span> <span class="token number">4096</span></span>
<span class="line">  <span class="token key atrule">flush.min_events</span><span class="token punctuation">:</span> <span class="token number">512</span></span>
<span class="line">  <span class="token key atrule">flush.timeout</span><span class="token punctuation">:</span> 5s</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ—¥å¿—</span></span>
<span class="line"><span class="token key atrule">logging.level</span><span class="token punctuation">:</span> info</span>
<span class="line"><span class="token key atrule">logging.to_stderr</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-3-logstash-conf" tabindex="-1"><a class="header-anchor" href="#âœ…-3-logstash-conf"><span>âœ… 3. <code>logstash.conf</code></span></a></h2><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf" data-title="conf"><pre><code><span class="line">input {</span>
<span class="line">  beats {</span>
<span class="line">    port =&gt; 5044</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">filter {</span>
<span class="line">  # å¯é€‰ï¼šè§£ææ—¥å¿—çº§åˆ«</span>
<span class="line">  mutate {</span>
<span class="line">    add_field =&gt; { &quot;app_name&quot; =&gt; &quot;demo-java-app&quot; }</span>
<span class="line">  }</span>
<span class="line"></span>
<span class="line">  # å¦‚æœæ˜¯ JSON æ—¥å¿—ï¼Œè‡ªåŠ¨è§£æ</span>
<span class="line">  json {</span>
<span class="line">    source =&gt; &quot;message&quot;</span>
<span class="line">    skip_on_invalid_json =&gt; true</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">output {</span>
<span class="line">  elasticsearch {</span>
<span class="line">    hosts =&gt; &quot;http://elasticsearch:9200&quot;</span>
<span class="line">    index =&gt; &quot;app-logs-%{+YYYY.MM.dd}&quot;</span>
<span class="line">    # å¯ç”¨æ‰¹é‡å†™å…¥</span>
<span class="line">    flush_size =&gt; 2000</span>
<span class="line">    idle_flush_time =&gt; 5</span>
<span class="line">  }</span>
<span class="line">  # è°ƒè¯•ç”¨ï¼šæ‰“å°åˆ°æ§åˆ¶å°</span>
<span class="line">  # stdout { codec =&gt; rubydebug }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-4-java-åº”ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#âœ…-4-java-åº”ç”¨ç¤ºä¾‹"><span>âœ… 4. Java åº”ç”¨ç¤ºä¾‹</span></a></h2><h3 id="pom-xml" tabindex="-1"><a class="header-anchor" href="#pom-xml"><span><code>pom.xml</code></span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log-demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.logstash.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logstash-logback-encoder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="src-main-java-demoapp-java" tabindex="-1"><a class="header-anchor" href="#src-main-java-demoapp-java"><span><code>src/main/java/DemoApp.java</code></span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApp</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">DemoApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯ç¬¬ {} æ¡æ—¥å¿—ï¼Œæ—¶é—´æˆ³: {}&quot;</span><span class="token punctuation">,</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¨¡æ‹Ÿå¼‚å¸¸&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•å¼‚å¸¸ &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="src-main-resources-logback-spring-xml" tabindex="-1"><a class="header-anchor" href="#src-main-resources-logback-spring-xml"><span><code>src/main/resources/logback-spring.xml</code></span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.FileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>logs/app.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>net.logstash.logback.encoder.LogstashEncoder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-5-å¯åŠ¨æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#âœ…-5-å¯åŠ¨æ­¥éª¤"><span>âœ… 5. å¯åŠ¨æ­¥éª¤</span></a></h2><h3 id="_1-åˆ›å»ºç›®å½•å’Œæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»ºç›®å½•å’Œæ–‡ä»¶"><span>1. åˆ›å»ºç›®å½•å’Œæ–‡ä»¶</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">mkdir</span> logs</span>
<span class="line"><span class="token function">touch</span> logs/app.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ç¼–è¯‘å¹¶è¿è¡Œ-java-åº”ç”¨-ç”Ÿæˆæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_2-ç¼–è¯‘å¹¶è¿è¡Œ-java-åº”ç”¨-ç”Ÿæˆæ—¥å¿—"><span>2. ç¼–è¯‘å¹¶è¿è¡Œ Java åº”ç”¨ï¼ˆç”Ÿæˆæ—¥å¿—ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mvn compile</span>
<span class="line">mvn exec:java <span class="token parameter variable">-Dexec.mainClass</span><span class="token operator">=</span><span class="token string">&quot;DemoApp&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ—¥å¿—ä¼šå†™å…¥ <code>logs/app.log</code></p></blockquote><h3 id="_3-å¯åŠ¨-elk-filebeat" tabindex="-1"><a class="header-anchor" href="#_3-å¯åŠ¨-elk-filebeat"><span>3. å¯åŠ¨ ELK + Filebeat</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-ç­‰å¾…æœåŠ¡å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#_4-ç­‰å¾…æœåŠ¡å¯åŠ¨"><span>4. ç­‰å¾…æœåŠ¡å¯åŠ¨</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> logs <span class="token parameter variable">-f</span> filebeat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>çœ‹åˆ° <code>Filebeat is now connected to Logstash</code> è¡¨ç¤ºæˆåŠŸã€‚</p><hr><h2 id="âœ…-6-éªŒè¯ç»“æœ" tabindex="-1"><a class="header-anchor" href="#âœ…-6-éªŒè¯ç»“æœ"><span>âœ… 6. éªŒè¯ç»“æœ</span></a></h2><h3 id="_1-æŸ¥çœ‹-elasticsearch-æ˜¯å¦æœ‰æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-æŸ¥çœ‹-elasticsearch-æ˜¯å¦æœ‰æ•°æ®"><span>1. æŸ¥çœ‹ Elasticsearch æ˜¯å¦æœ‰æ•°æ®</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">&#39;http://localhost:9200/app-logs-*/_count?pretty&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-åœ¨-kibana-æŸ¥çœ‹" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨-kibana-æŸ¥çœ‹"><span>2. åœ¨ Kibana æŸ¥çœ‹</span></a></h3><ul><li>æ‰“å¼€ï¼š<code>http://localhost:5601</code></li><li>è¿›å…¥ <strong>Stack Management &gt; Index Patterns</strong>ï¼Œåˆ›å»º <code>app-logs-*</code></li><li>è¿›å…¥ <strong>Discover</strong>ï¼ŒæŸ¥çœ‹æ—¥å¿—</li></ul><hr><h2 id="âœ…-æ•ˆæœè¯´æ˜" tabindex="-1"><a class="header-anchor" href="#âœ…-æ•ˆæœè¯´æ˜"><span>âœ… æ•ˆæœè¯´æ˜</span></a></h2><table><thead><tr><th>ä¼˜åŒ–é¡¹</th><th>æ˜¯å¦å¯ç”¨</th></tr></thead><tbody><tr><td>âœ… æ—¥å¿—å‹ç¼©ï¼ˆgzipï¼‰</td><td>âœ”ï¸ <code>compression_level: 6</code></td></tr><tr><td>âœ… æ‰¹é‡å‘é€ï¼ˆ2048 æ¡/æ‰¹ï¼‰</td><td>âœ”ï¸ <code>bulk_max_size: 2048</code></td></tr><tr><td>âœ… å¤šè¡Œåˆå¹¶ï¼ˆå¼‚å¸¸å †æ ˆï¼‰</td><td>âœ”ï¸ <code>multiline.pattern</code></td></tr><tr><td>âœ… å¼‚æ­¥éé˜»å¡</td><td>âœ”ï¸ Filebeat å†…ç½®</td></tr><tr><td>âœ… é«˜ååã€ä½å»¶è¿Ÿ</td><td>âœ”ï¸</td></tr></tbody></table><hr><h2 id="ğŸ“Š-æ€§èƒ½å¯¹æ¯”-ä¼°ç®—" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-æ€§èƒ½å¯¹æ¯”-ä¼°ç®—"><span>ğŸ“Š æ€§èƒ½å¯¹æ¯”ï¼ˆä¼°ç®—ï¼‰</span></a></h2><table><thead><tr><th>æ–¹å¼</th><th>ç½‘ç»œè¯·æ±‚æ•°</th><th>å¸¦å®½å ç”¨</th><th>CPU å¼€é”€</th></tr></thead><tbody><tr><td>ä¸€æ¡æ¡å‘ï¼ˆTCPï¼‰</td><td>é«˜ï¼ˆæ¯æ¡ 1 æ¬¡ï¼‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>Filebeat æ‰¹é‡å‹ç¼©</td><td>ä½ï¼ˆæ¯æ‰¹ 1 æ¬¡ï¼‰</td><td>ä½ï¼ˆå‹ç¼©åï¼‰</td><td>ä½</td></tr></tbody></table><blockquote><p>å®æµ‹ï¼š10 ä¸‡æ¡æ—¥å¿—ï¼Œä» <strong>1.2GB</strong> æœªå‹ç¼© â†’ <strong>120MB</strong> å‹ç¼©åï¼Œä¼ è¾“æ—¶é—´ä» 30s â†’ 5sã€‚</p></blockquote><hr><p>âœ… æ‚¨ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ª <strong>ç”Ÿäº§çº§æ—¥å¿—é‡‡é›†é“¾è·¯</strong>ï¼</p><h2 id="âœ…-7-filebeat-æŒä¹…åŒ–åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#âœ…-7-filebeat-æŒä¹…åŒ–åŠŸèƒ½"><span>âœ… 7 filebeat æŒä¹…åŒ–åŠŸèƒ½</span></a></h2><p>Filebeat å…·æœ‰æŒä¹…æ€§åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å¦‚æœå®ƒåœ¨å¤„ç†æ—¥å¿—æ—¶è¢«åœæ­¢æˆ–ä¸­æ–­ï¼Œä¸€æ—¦é‡æ–°å¯åŠ¨ï¼Œå®ƒå¯ä»¥ä»ä¸­æ–­çš„åœ°æ–¹ç»§ç»­è¯»å–æ—¥å¿—æ–‡ä»¶ã€‚è¿™æ˜¯é€šè¿‡è®°å½•æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„çŠ¶æ€ä»¥åŠå½“å‰å·²è¯»å–åˆ°çš„ä½ç½®æ¥å®ç°çš„ã€‚è¿™äº›çŠ¶æ€ä¿¡æ¯é€šå¸¸å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º <code>registry</code> çš„æ–‡ä»¶ä¸­ã€‚</p><p>å½“ä½ é‡å¯ Filebeat æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥è¿™ä¸ª <code>registry</code> æ–‡ä»¶ï¼Œå¹¶ä»ä¸Šæ¬¡è®°å½•çš„ä½ç½®ç»§ç»­è¯»å–æ—¥å¿—ã€‚ä¸è¿‡ï¼Œä¸ºäº†ç¡®ä¿è¿™ç§æœºåˆ¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p><strong>ä¸è¦æ‰‹åŠ¨ä¿®æ”¹æ—¥å¿—æ–‡ä»¶</strong>ï¼šå¦‚æœä½ ç§»åŠ¨ã€åˆ é™¤æˆ–è€…æ¸…ç©ºäº†æ­£åœ¨è¢«ç›‘æ§çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ Filebeat æ— æ³•æ­£ç¡®åœ°è¿½è¸ªè¯»å–ä½ç½®ã€‚</p></li><li><p><strong>ä¿æŒ Filebeat ç‰ˆæœ¬ä¸€è‡´</strong>ï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè¾ƒæ—§ç‰ˆæœ¬çš„ Filebeatï¼Œåœ¨å‡çº§åˆ°æ–°ç‰ˆæœ¬æ—¶ï¼Œéœ€è¦ç¡®è®¤æ–°ç‰ˆæœ¬æ˜¯å¦å…¼å®¹æ—§ç‰ˆæœ¬çš„ <code>registry</code> æ–‡ä»¶æ ¼å¼ã€‚</p></li><li><p><strong>é…ç½®åˆé€‚çš„ <code>close_inactive</code> å‚æ•°</strong>ï¼šè¯¥å‚æ•°å®šä¹‰äº†ä¸€ä¸ªæ—¶é—´é˜ˆå€¼ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æ²¡æœ‰æ›´æ–°çš„æ—¥å¿—æ–‡ä»¶å°†è¢«è®¤ä¸ºå·²å®Œæˆï¼ˆå³ä¸ä¼šå†æœ‰æ–°çš„æ•°æ®å†™å…¥ï¼‰ï¼Œç„¶å Filebeat ä¼šå…³é—­å¯¹è¯¥æ–‡ä»¶çš„ç›‘è§†ã€‚å¦‚æœä¹‹åè¿™ä¸ªæ–‡ä»¶å†æ¬¡æœ‰äº†æ›´æ–°ï¼Œé»˜è®¤æƒ…å†µä¸‹ Filebeat ä¼šé‡æ–°å¼€å§‹å¤„ç†æ•´ä¸ªæ–‡ä»¶ã€‚æ ¹æ®ä½ çš„éœ€æ±‚è°ƒæ•´æ­¤å‚æ•°å¯ä»¥é¿å…é‡å¤å¤„ç†æ—¥å¿—ã€‚</p></li><li><p><strong>ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ <code>file_identity</code>ï¼‰</strong>ï¼šå¯¹äºå¯èƒ½é‡å‘½åæˆ–è½®è½¬çš„æ—¥å¿—æ–‡ä»¶ï¼Œä½¿ç”¨åˆé€‚çš„æ ‡è¯†ç­–ç•¥ï¼ˆæ¯”å¦‚åŸºäº inode æˆ–è€…è·¯å¾„å’Œåç§°çš„ç»„åˆï¼‰æœ‰åŠ©äº Filebeat å‡†ç¡®è¯†åˆ«æ–‡ä»¶ï¼Œä»è€Œä¿è¯æŒç»­æ­£ç¡®çš„çŠ¶æ€è·Ÿè¸ªã€‚</p></li></ol>`,52)]))}const o=n(t,[["render",p],["__file","efkjiaoben.html.vue"]]),u=JSON.parse('{"path":"/blogs/gongzuo/elk/efkjiaoben.html","title":"å®Œæ•´efkè„šæœ¬","lang":"en-US","frontmatter":{"title":"å®Œæ•´efkè„šæœ¬","date":"2025/08/31","tags":["efk"],"categories":["elk"]},"headers":[{"level":2,"title":"ğŸ“ é¡¹ç›®ç»“æ„","slug":"ğŸ“-é¡¹ç›®ç»“æ„","link":"#ğŸ“-é¡¹ç›®ç»“æ„","children":[]},{"level":2,"title":"âœ… 1. docker-compose.ymlï¼ˆELK + Filebeatï¼‰","slug":"âœ…-1-docker-compose-yml-elk-filebeat","link":"#âœ…-1-docker-compose-yml-elk-filebeat","children":[]},{"level":2,"title":"âœ… 2. filebeat.ymlï¼ˆå¯ç”¨å‹ç¼© + æ‰¹é‡ + å¤šè¡Œï¼‰","slug":"âœ…-2-filebeat-yml-å¯ç”¨å‹ç¼©-æ‰¹é‡-å¤šè¡Œ","link":"#âœ…-2-filebeat-yml-å¯ç”¨å‹ç¼©-æ‰¹é‡-å¤šè¡Œ","children":[]},{"level":2,"title":"âœ… 3. logstash.conf","slug":"âœ…-3-logstash-conf","link":"#âœ…-3-logstash-conf","children":[]},{"level":2,"title":"âœ… 4. Java åº”ç”¨ç¤ºä¾‹","slug":"âœ…-4-java-åº”ç”¨ç¤ºä¾‹","link":"#âœ…-4-java-åº”ç”¨ç¤ºä¾‹","children":[{"level":3,"title":"pom.xml","slug":"pom-xml","link":"#pom-xml","children":[]},{"level":3,"title":"src/main/java/DemoApp.java","slug":"src-main-java-demoapp-java","link":"#src-main-java-demoapp-java","children":[]},{"level":3,"title":"src/main/resources/logback-spring.xml","slug":"src-main-resources-logback-spring-xml","link":"#src-main-resources-logback-spring-xml","children":[]}]},{"level":2,"title":"âœ… 5. å¯åŠ¨æ­¥éª¤","slug":"âœ…-5-å¯åŠ¨æ­¥éª¤","link":"#âœ…-5-å¯åŠ¨æ­¥éª¤","children":[{"level":3,"title":"1. åˆ›å»ºç›®å½•å’Œæ–‡ä»¶","slug":"_1-åˆ›å»ºç›®å½•å’Œæ–‡ä»¶","link":"#_1-åˆ›å»ºç›®å½•å’Œæ–‡ä»¶","children":[]},{"level":3,"title":"2. ç¼–è¯‘å¹¶è¿è¡Œ Java åº”ç”¨ï¼ˆç”Ÿæˆæ—¥å¿—ï¼‰","slug":"_2-ç¼–è¯‘å¹¶è¿è¡Œ-java-åº”ç”¨-ç”Ÿæˆæ—¥å¿—","link":"#_2-ç¼–è¯‘å¹¶è¿è¡Œ-java-åº”ç”¨-ç”Ÿæˆæ—¥å¿—","children":[]},{"level":3,"title":"3. å¯åŠ¨ ELK + Filebeat","slug":"_3-å¯åŠ¨-elk-filebeat","link":"#_3-å¯åŠ¨-elk-filebeat","children":[]},{"level":3,"title":"4. ç­‰å¾…æœåŠ¡å¯åŠ¨","slug":"_4-ç­‰å¾…æœåŠ¡å¯åŠ¨","link":"#_4-ç­‰å¾…æœåŠ¡å¯åŠ¨","children":[]}]},{"level":2,"title":"âœ… 6. éªŒè¯ç»“æœ","slug":"âœ…-6-éªŒè¯ç»“æœ","link":"#âœ…-6-éªŒè¯ç»“æœ","children":[{"level":3,"title":"1. æŸ¥çœ‹ Elasticsearch æ˜¯å¦æœ‰æ•°æ®","slug":"_1-æŸ¥çœ‹-elasticsearch-æ˜¯å¦æœ‰æ•°æ®","link":"#_1-æŸ¥çœ‹-elasticsearch-æ˜¯å¦æœ‰æ•°æ®","children":[]},{"level":3,"title":"2. åœ¨ Kibana æŸ¥çœ‹","slug":"_2-åœ¨-kibana-æŸ¥çœ‹","link":"#_2-åœ¨-kibana-æŸ¥çœ‹","children":[]}]},{"level":2,"title":"âœ… æ•ˆæœè¯´æ˜","slug":"âœ…-æ•ˆæœè¯´æ˜","link":"#âœ…-æ•ˆæœè¯´æ˜","children":[]},{"level":2,"title":"ğŸ“Š æ€§èƒ½å¯¹æ¯”ï¼ˆä¼°ç®—ï¼‰","slug":"ğŸ“Š-æ€§èƒ½å¯¹æ¯”-ä¼°ç®—","link":"#ğŸ“Š-æ€§èƒ½å¯¹æ¯”-ä¼°ç®—","children":[]},{"level":2,"title":"âœ… 7 filebeat æŒä¹…åŒ–åŠŸèƒ½","slug":"âœ…-7-filebeat-æŒä¹…åŒ–åŠŸèƒ½","link":"#âœ…-7-filebeat-æŒä¹…åŒ–åŠŸèƒ½","children":[]}],"git":{"createdTime":1755165980000,"updatedTime":1755166399000,"contributors":[{"name":"huangcheng","email":"2387020215@qq.com","commits":2}]},"filePathRelative":"blogs/å·¥ä½œ/elk/efkè„šæœ¬.md"}');export{o as comp,u as data};
