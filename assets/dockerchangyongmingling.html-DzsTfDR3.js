import{_ as t,c as d,a as o,o as n}from"./app-qwDAWgIM.js";const r={};function c(a,e){return n(),d("div",null,e[0]||(e[0]=[o(`<h1 id="ğŸ³-docker-docker-compose-å‘½ä»¤å¤§å…¨-è¶…è¯¦ç»†ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ³-docker-docker-compose-å‘½ä»¤å¤§å…¨-è¶…è¯¦ç»†ç‰ˆ"><span>ğŸ³ <strong>Docker &amp; Docker Compose å‘½ä»¤å¤§å…¨ï¼ˆè¶…è¯¦ç»†ç‰ˆï¼‰</strong></span></a></h1><hr><h2 id="ä¸€ã€docker-åŸºç¡€å‘½ä»¤åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€docker-åŸºç¡€å‘½ä»¤åˆ†ç±»"><span>ä¸€ã€Docker åŸºç¡€å‘½ä»¤åˆ†ç±»</span></a></h2><h3 id="âœ…-1-é•œåƒç®¡ç†-image" tabindex="-1"><a class="header-anchor" href="#âœ…-1-é•œåƒç®¡ç†-image"><span>âœ… 1. é•œåƒç®¡ç†ï¼ˆImageï¼‰</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker images</code></td><td>åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ</td></tr><tr><td><code>docker images -a</code></td><td>æ˜¾ç¤ºæ‰€æœ‰é•œåƒï¼ˆåŒ…æ‹¬ä¸­é—´å±‚ï¼‰</td></tr><tr><td><code>docker images --no-trunc</code></td><td>æ˜¾ç¤ºå®Œæ•´é•œåƒ ID</td></tr><tr><td><code>docker search nginx</code></td><td>æœç´¢ Docker Hub ä¸Šçš„é•œåƒ</td></tr><tr><td><code>docker pull nginx:latest</code></td><td>æ‹‰å–é•œåƒï¼ˆå¯æŒ‡å®šæ ‡ç­¾ï¼‰</td></tr><tr><td><code>docker pull --platform linux/amd64 nginx</code></td><td>æ‹‰å–æŒ‡å®šæ¶æ„é•œåƒ</td></tr><tr><td><code>docker push myrepo/myapp:v1</code></td><td>æ¨é€é•œåƒåˆ°ä»“åº“</td></tr><tr><td><code>docker tag nginx mynginx:custom</code></td><td>ç»™é•œåƒæ‰“æ ‡ç­¾</td></tr><tr><td><code>docker rmi nginx</code></td><td>åˆ é™¤é•œåƒ</td></tr><tr><td><code>docker rmi $(docker images -q)</code></td><td>åˆ é™¤æ‰€æœ‰æœ¬åœ°é•œåƒï¼ˆæ…ç”¨ï¼‰</td></tr><tr><td><code>docker image prune</code></td><td>åˆ é™¤æ‚¬ç©ºé•œåƒï¼ˆdanglingï¼‰</td></tr><tr><td><code>docker image prune -a</code></td><td>åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ</td></tr><tr><td><code>docker image ls --digests</code></td><td>æ˜¾ç¤ºé•œåƒæ‘˜è¦ï¼ˆdigestï¼‰</td></tr><tr><td><code>docker image inspect nginx</code></td><td>æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯ï¼ˆJSONï¼‰</td></tr></tbody></table><hr><h3 id="âœ…-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†-container" tabindex="-1"><a class="header-anchor" href="#âœ…-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†-container"><span>âœ… 2. å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆContainerï¼‰</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker run hello-world</code></td><td>è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼ˆä¸€æ¬¡æ€§ï¼‰</td></tr><tr><td><code>docker run -d nginx</code></td><td>åå°è¿è¡Œå®¹å™¨ï¼ˆdetachedï¼‰</td></tr><tr><td><code>docker run -it ubuntu /bin/bash</code></td><td>äº¤äº’å¼è¿è¡Œå¹¶è¿›å…¥å®¹å™¨</td></tr><tr><td><code>docker run -p 8080:80 nginx</code></td><td>ç«¯å£æ˜ å°„ï¼ˆå®¿ä¸»æœº:å®¹å™¨ï¼‰</td></tr><tr><td><code>docker run -v /host:/container nginx</code></td><td>å·æ˜ å°„ï¼ˆæŒä¹…åŒ–æ•°æ®ï¼‰</td></tr><tr><td><code>docker run --name myapp nginx</code></td><td>æŒ‡å®šå®¹å™¨åç§°</td></tr><tr><td><code>docker run --rm nginx</code></td><td>å®¹å™¨é€€å‡ºåè‡ªåŠ¨åˆ é™¤</td></tr><tr><td><code>docker run --env NAME=Qwen nginx</code></td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td></tr><tr><td><code>docker start container_id</code></td><td>å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</td></tr><tr><td><code>docker stop container_id</code></td><td>åœæ­¢å®¹å™¨ï¼ˆå‘é€ SIGTERMï¼‰</td></tr><tr><td><code>docker restart container_id</code></td><td>é‡å¯å®¹å™¨</td></tr><tr><td><code>docker kill container_id</code></td><td>å¼ºåˆ¶ç»ˆæ­¢å®¹å™¨ï¼ˆå‘é€ SIGKILLï¼‰</td></tr><tr><td><code>docker pause container_id</code></td><td>æš‚åœå®¹å™¨ï¼ˆå†»ç»“è¿›ç¨‹ï¼‰</td></tr><tr><td><code>docker unpause container_id</code></td><td>æ¢å¤å®¹å™¨</td></tr><tr><td><code>docker rm container_id</code></td><td>åˆ é™¤å®¹å™¨</td></tr><tr><td><code>docker rm -f container_id</code></td><td>å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</td></tr><tr><td><code>docker container prune</code></td><td>åˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨</td></tr></tbody></table><hr><h3 id="âœ…-3-å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#âœ…-3-å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•"><span>âœ… 3. å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker ps</code></td><td>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</td></tr><tr><td><code>docker ps -a</code></td><td>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰</td></tr><tr><td><code>docker ps -q</code></td><td>ä»…æ˜¾ç¤ºå®¹å™¨ IDï¼ˆé€‚åˆè„šæœ¬ï¼‰</td></tr><tr><td><code>docker ps -l</code></td><td>æ˜¾ç¤ºæœ€æ–°åˆ›å»ºçš„å®¹å™¨</td></tr><tr><td><code>docker logs container_id</code></td><td>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</td></tr><tr><td><code>docker logs -f container_id</code></td><td>å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆç±»ä¼¼ tail -fï¼‰</td></tr><tr><td><code>docker logs -t container_id</code></td><td>æ˜¾ç¤ºæ—¶é—´æˆ³</td></tr><tr><td><code>docker logs --tail 100 container_id</code></td><td>æŸ¥çœ‹æœ€å 100 è¡Œæ—¥å¿—</td></tr><tr><td><code>docker exec -it container_id /bin/bash</code></td><td>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</td></tr><tr><td><code>docker exec -u 0 -it container_id /bin/sh</code></td><td>ä»¥ root ç”¨æˆ·è¿›å…¥å®¹å™¨</td></tr><tr><td><code>docker top container_id</code></td><td>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</td></tr><tr><td><code>docker stats</code></td><td>å®æ—¶æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨ï¼ˆCPUã€å†…å­˜ã€ç½‘ç»œï¼‰</td></tr><tr><td><code>docker stats --no-stream</code></td><td>æŸ¥çœ‹å½“å‰èµ„æºä½¿ç”¨ï¼ˆä¸æŒç»­ï¼‰</td></tr><tr><td><code>docker inspect container_id</code></td><td>æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼ˆJSON æ ¼å¼ï¼‰</td></tr><tr><td><code>docker port container_id</code></td><td>æŸ¥çœ‹ç«¯å£æ˜ å°„</td></tr><tr><td><code>docker diff container_id</code></td><td>æŸ¥çœ‹å®¹å™¨æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼ˆA:æ–°å¢, D:åˆ é™¤, C:ä¿®æ”¹ï¼‰</td></tr></tbody></table><hr><h3 id="âœ…-4-ç½‘ç»œç®¡ç†-network" tabindex="-1"><a class="header-anchor" href="#âœ…-4-ç½‘ç»œç®¡ç†-network"><span>âœ… 4. ç½‘ç»œç®¡ç†ï¼ˆNetworkï¼‰</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker network ls</code></td><td>åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ</td></tr><tr><td><code>docker network create mynet</code></td><td>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</td></tr><tr><td><code>docker network create --driver bridge mynet</code></td><td>åˆ›å»ºæ¡¥æ¥ç½‘ç»œ</td></tr><tr><td><code>docker network create --driver overlay mynet</code></td><td>åˆ›å»ºè¦†ç›–ç½‘ç»œï¼ˆSwarmï¼‰</td></tr><tr><td><code>docker network connect mynet container_id</code></td><td>å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ</td></tr><tr><td><code>docker network disconnect mynet container_id</code></td><td>æ–­å¼€å®¹å™¨ç½‘ç»œè¿æ¥</td></tr><tr><td><code>docker network inspect mynet</code></td><td>æŸ¥çœ‹ç½‘ç»œè¯¦æƒ…</td></tr><tr><td><code>docker network rm mynet</code></td><td>åˆ é™¤ç½‘ç»œ</td></tr><tr><td><code>docker run --network mynet nginx</code></td><td>è¿è¡Œå®¹å™¨å¹¶æŒ‡å®šç½‘ç»œ</td></tr><tr><td><code>docker run --network host nginx</code></td><td>ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼ˆé«˜æ€§èƒ½ï¼‰</td></tr><tr><td><code>docker run --network none nginx</code></td><td>ä¸ä½¿ç”¨ç½‘ç»œ</td></tr></tbody></table><hr><h3 id="âœ…-5-å­˜å‚¨å·ç®¡ç†-volume" tabindex="-1"><a class="header-anchor" href="#âœ…-5-å­˜å‚¨å·ç®¡ç†-volume"><span>âœ… 5. å­˜å‚¨å·ç®¡ç†ï¼ˆVolumeï¼‰</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker volume ls</code></td><td>åˆ—å‡ºæ‰€æœ‰å·</td></tr><tr><td><code>docker volume create myvol</code></td><td>åˆ›å»ºå·</td></tr><tr><td><code>docker volume inspect myvol</code></td><td>æŸ¥çœ‹å·è¯¦æƒ…</td></tr><tr><td><code>docker volume rm myvol</code></td><td>åˆ é™¤å·</td></tr><tr><td><code>docker volume prune</code></td><td>åˆ é™¤æœªä½¿ç”¨çš„å·</td></tr><tr><td><code>docker run -v myvol:/data nginx</code></td><td>ä½¿ç”¨å‘½åå·</td></tr><tr><td><code>docker run -v /path/on/host:/data nginx</code></td><td>ä½¿ç”¨ç»‘å®šæŒ‚è½½ï¼ˆbind mountï¼‰</td></tr><tr><td><code>docker run --mount source=myvol,target=/data nginx</code></td><td>ä½¿ç”¨ --mount è¯­æ³•ï¼ˆæ¨èï¼‰</td></tr><tr><td><code>docker volume create --driver local --opt type=tmpfs --opt device=tmpfs mytmp</code></td><td>åˆ›å»º tmpfs å·</td></tr></tbody></table><hr><h3 id="âœ…-6-æ„å»ºä¸é•œåƒåˆ¶ä½œ-build" tabindex="-1"><a class="header-anchor" href="#âœ…-6-æ„å»ºä¸é•œåƒåˆ¶ä½œ-build"><span>âœ… 6. æ„å»ºä¸é•œåƒåˆ¶ä½œï¼ˆBuildï¼‰</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker build -t myapp:v1 .</code></td><td>æ„å»ºé•œåƒ</td></tr><tr><td><code>docker build --no-cache -t myapp .</code></td><td>æ„å»ºæ—¶ä¸ä½¿ç”¨ç¼“å­˜</td></tr><tr><td><code>docker build --build-arg HTTP_PROXY=http://proxy:8080 .</code></td><td>ä¼ é€’æ„å»ºå‚æ•°</td></tr><tr><td><code>docker build --target builder .</code></td><td>å¤šé˜¶æ®µæ„å»ºï¼ŒæŒ‡å®šç›®æ ‡é˜¶æ®µ</td></tr><tr><td><code>docker buildx build --platform linux/amd64,linux/arm64 .</code></td><td>è·¨å¹³å°æ„å»ºï¼ˆéœ€ buildxï¼‰</td></tr><tr><td><code>docker save -o myapp.tar myapp:v1</code></td><td>å°†é•œåƒä¿å­˜ä¸º tar æ–‡ä»¶</td></tr><tr><td><code>docker load -i myapp.tar</code></td><td>ä» tar æ–‡ä»¶åŠ è½½é•œåƒ</td></tr><tr><td><code>docker import url.tar myapp:v1</code></td><td>ä» tar å¯¼å…¥é•œåƒï¼ˆä¸ä¿ç•™å†å²ï¼‰</td></tr><tr><td><code>docker export container_id &gt; container.tar</code></td><td>å¯¼å‡ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</td></tr><tr><td><code>docker import container.tar myapp:v1</code></td><td>ä»å®¹å™¨æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥é•œåƒ</td></tr></tbody></table><hr><h3 id="âœ…-7-docker-ç³»ç»Ÿä¸ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#âœ…-7-docker-ç³»ç»Ÿä¸ä¿¡æ¯"><span>âœ… 7. Docker ç³»ç»Ÿä¸ä¿¡æ¯</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker version</code></td><td>æŸ¥çœ‹ Docker ç‰ˆæœ¬</td></tr><tr><td><code>docker info</code></td><td>æŸ¥çœ‹ Docker ç³»ç»Ÿä¿¡æ¯</td></tr><tr><td><code>docker system df</code></td><td>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆé•œåƒã€å®¹å™¨ã€å·ï¼‰</td></tr><tr><td><code>docker system prune</code></td><td>æ¸…ç†æœªä½¿ç”¨çš„èµ„æºï¼ˆå®¹å™¨ã€ç½‘ç»œã€é•œåƒï¼‰</td></tr><tr><td><code>docker system prune -a</code></td><td>æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ˆåŒ…æ‹¬é•œåƒï¼‰</td></tr><tr><td><code>docker system prune --volumes</code></td><td>æ¸…ç†æœªä½¿ç”¨çš„å·</td></tr><tr><td><code>docker login</code></td><td>ç™»å½• Docker ä»“åº“</td></tr><tr><td><code>docker logout</code></td><td>æ³¨é”€ç™»å½•</td></tr><tr><td><code>docker events</code></td><td>å®æ—¶æŸ¥çœ‹ Docker äº‹ä»¶æµ</td></tr><tr><td><code>docker history nginx</code></td><td>æŸ¥çœ‹é•œåƒæ„å»ºå†å²</td></tr><tr><td><code>docker wait container_id</code></td><td>é˜»å¡ç›´åˆ°å®¹å™¨åœæ­¢ï¼Œè¿”å›é€€å‡ºç </td></tr></tbody></table><hr><h2 id="äºŒã€docker-compose-å‘½ä»¤å¤§å…¨" tabindex="-1"><a class="header-anchor" href="#äºŒã€docker-compose-å‘½ä»¤å¤§å…¨"><span>äºŒã€Docker Compose å‘½ä»¤å¤§å…¨</span></a></h2><blockquote><p>ğŸ’¡ ä½¿ç”¨ <code>docker compose</code>ï¼ˆæ–°æ’ä»¶ï¼‰æˆ– <code>docker-compose</code>ï¼ˆæ—§ç‹¬ç«‹å‘½ä»¤ï¼‰</p></blockquote><h3 id="âœ…-å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#âœ…-å¸¸ç”¨å‘½ä»¤"><span>âœ… å¸¸ç”¨å‘½ä»¤</span></a></h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>docker compose up</code></td><td>å¯åŠ¨æ‰€æœ‰æœåŠ¡</td></tr><tr><td><code>docker compose up -d</code></td><td>åå°å¯åŠ¨</td></tr><tr><td><code>docker compose up --build</code></td><td>æ„å»ºåå¯åŠ¨</td></tr><tr><td><code>docker compose up --force-recreate</code></td><td>å¼ºåˆ¶é‡å»ºå®¹å™¨</td></tr><tr><td><code>docker compose down</code></td><td>åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œ</td></tr><tr><td><code>docker compose down -v</code></td><td>åˆ é™¤å·ï¼ˆè°¨æ…ï¼ï¼‰</td></tr><tr><td><code>docker compose down --rmi all</code></td><td>åˆ é™¤é•œåƒ</td></tr><tr><td><code>docker compose stop</code></td><td>åœæ­¢æœåŠ¡ï¼ˆä¸åˆ é™¤ï¼‰</td></tr><tr><td><code>docker compose start</code></td><td>å¯åŠ¨å·²åœæ­¢çš„æœåŠ¡</td></tr><tr><td><code>docker compose restart</code></td><td>é‡å¯æœåŠ¡</td></tr><tr><td><code>docker compose ps</code></td><td>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</td></tr><tr><td><code>docker compose logs</code></td><td>æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—</td></tr><tr><td><code>docker compose logs -f web</code></td><td>å®æ—¶æŸ¥çœ‹æŸæœåŠ¡æ—¥å¿—</td></tr><tr><td><code>docker compose exec web /bin/sh</code></td><td>è¿›å…¥æœåŠ¡å®¹å™¨</td></tr><tr><td><code>docker compose build</code></td><td>æ„å»ºæœåŠ¡é•œåƒ</td></tr><tr><td><code>docker compose build --no-cache</code></td><td>ä¸ä½¿ç”¨ç¼“å­˜æ„å»º</td></tr><tr><td><code>docker compose config</code></td><td>éªŒè¯å¹¶æ˜¾ç¤ºæœ€ç»ˆ compose é…ç½®</td></tr><tr><td><code>docker compose config --services</code></td><td>ä»…åˆ—å‡ºæœåŠ¡åç§°</td></tr><tr><td><code>docker compose config --images</code></td><td>ä»…åˆ—å‡ºé•œåƒ</td></tr><tr><td><code>docker compose top</code></td><td>æŸ¥çœ‹æœåŠ¡è¿›ç¨‹</td></tr><tr><td><code>docker compose pause</code></td><td>æš‚åœæ‰€æœ‰æœåŠ¡</td></tr><tr><td><code>docker compose unpause</code></td><td>æ¢å¤æš‚åœçš„æœåŠ¡</td></tr><tr><td><code>docker compose kill</code></td><td>å¼ºåˆ¶ç»ˆæ­¢æœåŠ¡</td></tr><tr><td><code>docker compose run web /bin/sh</code></td><td>ä¸´æ—¶è¿è¡Œä¸€ä¸ªæœåŠ¡å®¹å™¨ï¼ˆç”¨äºè°ƒè¯•ï¼‰</td></tr><tr><td><code>docker compose run --rm web ls /</code></td><td>è¿è¡Œä¸€æ¬¡å‘½ä»¤ååˆ é™¤å®¹å™¨</td></tr></tbody></table><hr><h3 id="âœ…-é«˜çº§-compose-æŠ€å·§" tabindex="-1"><a class="header-anchor" href="#âœ…-é«˜çº§-compose-æŠ€å·§"><span>âœ… é«˜çº§ Compose æŠ€å·§</span></a></h3><h4 id="_1-ä½¿ç”¨å¤šä¸ª-compose-æ–‡ä»¶-ç¯å¢ƒéš”ç¦»" tabindex="-1"><a class="header-anchor" href="#_1-ä½¿ç”¨å¤šä¸ª-compose-æ–‡ä»¶-ç¯å¢ƒéš”ç¦»"><span>1. ä½¿ç”¨å¤šä¸ª compose æ–‡ä»¶ï¼ˆç¯å¢ƒéš”ç¦»ï¼‰</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.yml <span class="token parameter variable">-f</span> docker-compose.prod.yml up <span class="token parameter variable">-d</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-æŒ‡å®šç¯å¢ƒæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-æŒ‡å®šç¯å¢ƒæ–‡ä»¶"><span>2. æŒ‡å®šç¯å¢ƒæ–‡ä»¶</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token comment"># docker-compose.yml</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">app</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> DB_HOST</span>
<span class="line"><span class="token comment"># .env æ–‡ä»¶</span></span>
<span class="line">DB_HOST=prod<span class="token punctuation">-</span>db.example.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å¥åº·æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#_3-å¥åº·æ£€æŸ¥"><span>3. å¥åº·æ£€æŸ¥</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8080/health&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s</span>
<span class="line">  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s</span>
<span class="line">  <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-ä¾èµ–ä¸å¯åŠ¨é¡ºåº" tabindex="-1"><a class="header-anchor" href="#_4-ä¾èµ–ä¸å¯åŠ¨é¡ºåº"><span>4. ä¾èµ–ä¸å¯åŠ¨é¡ºåº</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">db</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„-docker-é«˜çº§å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„-docker-é«˜çº§å‘½ä»¤"><span>ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„ Docker é«˜çº§å‘½ä»¤</span></a></h2><h3 id="ğŸ”¥-1-docker-stats-format-è‡ªå®šä¹‰è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-1-docker-stats-format-è‡ªå®šä¹‰è¾“å‡º"><span>ğŸ”¥ 1. <code>docker stats --format</code>ï¼ˆè‡ªå®šä¹‰è¾“å‡ºï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> stats <span class="token parameter variable">--format</span> <span class="token string">&quot;table {{.Name}}<span class="token entity" title="\\t">\\t</span>{{.CPUPerc}}<span class="token entity" title="\\t">\\t</span>{{.MemUsage}}&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ğŸ”¥-2-docker-run-init-ä½¿ç”¨-tini-ä½œä¸º-init-è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-2-docker-run-init-ä½¿ç”¨-tini-ä½œä¸º-init-è¿›ç¨‹"><span>ğŸ”¥ 2. <code>docker run --init</code>ï¼ˆä½¿ç”¨ tini ä½œä¸º init è¿›ç¨‹ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--init</span> myapp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>é¿å…åƒµå°¸è¿›ç¨‹ï¼Œæ¨èç”Ÿäº§ä½¿ç”¨ã€‚</p></blockquote><h3 id="ğŸ”¥-3-docker-run-read-only-åªè¯»æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-3-docker-run-read-only-åªè¯»æ–‡ä»¶ç³»ç»Ÿ"><span>ğŸ”¥ 3. <code>docker run --read-only</code>ï¼ˆåªè¯»æ–‡ä»¶ç³»ç»Ÿï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run --read-only <span class="token parameter variable">--tmpfs</span> /tmp myapp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>æé«˜å®‰å…¨æ€§ã€‚</p></blockquote><h3 id="ğŸ”¥-4-docker-run-security-opt-å®‰å…¨é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-4-docker-run-security-opt-å®‰å…¨é€‰é¡¹"><span>ğŸ”¥ 4. <code>docker run --security-opt</code>ï¼ˆå®‰å…¨é€‰é¡¹ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run --security-opt <span class="token assign-left variable">apparmor</span><span class="token operator">=</span>unconfined myapp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ğŸ”¥-5-docker-checkpoint-æ£€æŸ¥ç‚¹ä¸æ¢å¤" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-5-docker-checkpoint-æ£€æŸ¥ç‚¹ä¸æ¢å¤"><span>ğŸ”¥ 5. <code>docker checkpoint</code>ï¼ˆæ£€æŸ¥ç‚¹ä¸æ¢å¤ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> checkpoint create container_id checkpoint1</span>
<span class="line"><span class="token function">docker</span> start <span class="token parameter variable">--checkpoint</span> checkpoint1 container_id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>éœ€å¯ç”¨å®éªŒç‰¹æ€§ã€‚</p></blockquote><h3 id="ğŸ”¥-6-docker-build-squash-å‹ç¼©é•œåƒå±‚" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-6-docker-build-squash-å‹ç¼©é•œåƒå±‚"><span>ğŸ”¥ 6. <code>docker build --squash</code>ï¼ˆå‹ç¼©é•œåƒå±‚ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> build <span class="token parameter variable">--squash</span> <span class="token parameter variable">-t</span> myapp <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å‡å°‘é•œåƒå±‚æ•°ï¼Œéœ€å¯ç”¨ <code>--experimental</code>ã€‚</p></blockquote><h3 id="ğŸ”¥-7-docker-scan-é•œåƒæ¼æ´æ‰«æ" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-7-docker-scan-é•œåƒæ¼æ´æ‰«æ"><span>ğŸ”¥ 7. <code>docker scan</code>ï¼ˆé•œåƒæ¼æ´æ‰«æï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> scan nginx:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>éœ€å®‰è£… <code>docker scan</code> æ’ä»¶ã€‚</p></blockquote><h3 id="ğŸ”¥-8-docker-context-å¤šç¯å¢ƒç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-8-docker-context-å¤šç¯å¢ƒç®¡ç†"><span>ğŸ”¥ 8. <code>docker context</code>ï¼ˆå¤šç¯å¢ƒç®¡ç†ï¼‰</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> context create remote <span class="token parameter variable">--docker</span> <span class="token string">&quot;host=ssh://user@remote&quot;</span></span>
<span class="line"><span class="token function">docker</span> context use remote</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç®¡ç†å¤šä¸ª Docker ä¸»æœºã€‚</p></blockquote><hr><h2 id="å››ã€æœ€ä½³å®è·µå»ºè®®" tabindex="-1"><a class="header-anchor" href="#å››ã€æœ€ä½³å®è·µå»ºè®®"><span>å››ã€æœ€ä½³å®è·µå»ºè®®</span></a></h2><ol><li><strong>å§‹ç»ˆä½¿ç”¨é•œåƒåŠ é€Ÿå™¨</strong>ï¼ˆå¦‚é˜¿é‡Œäº‘ï¼‰</li><li><strong>ä½¿ç”¨ <code>.dockerignore</code></strong> é¿å…ä¸å¿…è¦çš„æ–‡ä»¶è¿›å…¥æ„å»ºä¸Šä¸‹æ–‡</li><li><strong>ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œå®¹å™¨</strong></li><li><strong>å®šæœŸæ¸…ç†èµ„æº</strong>ï¼š<code>docker system prune -a</code></li><li><strong>ä½¿ç”¨ <code>--rm</code></strong> ä¸´æ—¶å®¹å™¨</li><li><strong>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ <code>docker compose</code> æˆ– Kubernetes</strong></li><li><strong>æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ <code>docker secret</code> æˆ–ç¯å¢ƒå˜é‡ç®¡ç†</strong></li></ol><hr><h2 id="âœ…-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-æ€»ç»“"><span>âœ… æ€»ç»“</span></a></h2><table><thead><tr><th>ç±»åˆ«</th><th>å…³é”®å‘½ä»¤</th></tr></thead><tbody><tr><td>é•œåƒ</td><td><code>pull</code>, <code>build</code>, <code>push</code>, <code>tag</code>, <code>rmi</code></td></tr><tr><td>å®¹å™¨</td><td><code>run</code>, <code>start</code>, <code>stop</code>, <code>exec</code>, <code>logs</code></td></tr><tr><td>ç½‘ç»œ</td><td><code>network create</code>, <code>connect</code>, <code>inspect</code></td></tr><tr><td>å·</td><td><code>volume create</code>, <code>ls</code>, <code>prune</code></td></tr><tr><td>ç³»ç»Ÿ</td><td><code>system prune</code>, <code>info</code>, <code>version</code></td></tr><tr><td>Compose</td><td><code>up</code>, <code>down</code>, <code>logs</code>, <code>exec</code>, <code>config</code></td></tr><tr><td>é«˜çº§</td><td><code>checkpoint</code>, <code>scan</code>, <code>context</code>, <code>build --squash</code></td></tr></tbody></table><hr><p>è¿™ä»½å‘½ä»¤å¤§å…¨æ¶µç›–äº† <strong>99% çš„æ—¥å¸¸ä½¿ç”¨åœºæ™¯</strong>ï¼Œå¹¶åŒ…å«äº†ä¸€äº›<strong>é«˜çº§è¿ç»´æŠ€å·§</strong>ã€‚å»ºè®®æ”¶è—æ­¤é¡µï¼Œä½œä¸ºæ‚¨çš„ Docker æ‰‹å†Œã€‚</p>`,70)]))}const i=t(r,[["render",c],["__file","dockerchangyongmingling.html.vue"]]),l=JSON.parse('{"path":"/blogs/gongzuo/docker/dockerchangyongmingling.html","title":"docker å¸¸ç”¨å‘½ä»¤","lang":"en-US","frontmatter":{"title":"docker å¸¸ç”¨å‘½ä»¤","date":"2025/08/15","tags":["å‘½ä»¤"],"categories":["docker"]},"headers":[{"level":2,"title":"ä¸€ã€Docker åŸºç¡€å‘½ä»¤åˆ†ç±»","slug":"ä¸€ã€docker-åŸºç¡€å‘½ä»¤åˆ†ç±»","link":"#ä¸€ã€docker-åŸºç¡€å‘½ä»¤åˆ†ç±»","children":[{"level":3,"title":"âœ… 1. é•œåƒç®¡ç†ï¼ˆImageï¼‰","slug":"âœ…-1-é•œåƒç®¡ç†-image","link":"#âœ…-1-é•œåƒç®¡ç†-image","children":[]},{"level":3,"title":"âœ… 2. å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆContainerï¼‰","slug":"âœ…-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†-container","link":"#âœ…-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†-container","children":[]},{"level":3,"title":"âœ… 3. å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•","slug":"âœ…-3-å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•","link":"#âœ…-3-å®¹å™¨æŸ¥çœ‹ä¸è°ƒè¯•","children":[]},{"level":3,"title":"âœ… 4. ç½‘ç»œç®¡ç†ï¼ˆNetworkï¼‰","slug":"âœ…-4-ç½‘ç»œç®¡ç†-network","link":"#âœ…-4-ç½‘ç»œç®¡ç†-network","children":[]},{"level":3,"title":"âœ… 5. å­˜å‚¨å·ç®¡ç†ï¼ˆVolumeï¼‰","slug":"âœ…-5-å­˜å‚¨å·ç®¡ç†-volume","link":"#âœ…-5-å­˜å‚¨å·ç®¡ç†-volume","children":[]},{"level":3,"title":"âœ… 6. æ„å»ºä¸é•œåƒåˆ¶ä½œï¼ˆBuildï¼‰","slug":"âœ…-6-æ„å»ºä¸é•œåƒåˆ¶ä½œ-build","link":"#âœ…-6-æ„å»ºä¸é•œåƒåˆ¶ä½œ-build","children":[]},{"level":3,"title":"âœ… 7. Docker ç³»ç»Ÿä¸ä¿¡æ¯","slug":"âœ…-7-docker-ç³»ç»Ÿä¸ä¿¡æ¯","link":"#âœ…-7-docker-ç³»ç»Ÿä¸ä¿¡æ¯","children":[]}]},{"level":2,"title":"äºŒã€Docker Compose å‘½ä»¤å¤§å…¨","slug":"äºŒã€docker-compose-å‘½ä»¤å¤§å…¨","link":"#äºŒã€docker-compose-å‘½ä»¤å¤§å…¨","children":[{"level":3,"title":"âœ… å¸¸ç”¨å‘½ä»¤","slug":"âœ…-å¸¸ç”¨å‘½ä»¤","link":"#âœ…-å¸¸ç”¨å‘½ä»¤","children":[]},{"level":3,"title":"âœ… é«˜çº§ Compose æŠ€å·§","slug":"âœ…-é«˜çº§-compose-æŠ€å·§","link":"#âœ…-é«˜çº§-compose-æŠ€å·§","children":[]}]},{"level":2,"title":"ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„ Docker é«˜çº§å‘½ä»¤","slug":"ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„-docker-é«˜çº§å‘½ä»¤","link":"#ä¸‰ã€æ‚¨å¯èƒ½ä¸çŸ¥é“çš„-docker-é«˜çº§å‘½ä»¤","children":[{"level":3,"title":"ğŸ”¥ 1. docker stats --formatï¼ˆè‡ªå®šä¹‰è¾“å‡ºï¼‰","slug":"ğŸ”¥-1-docker-stats-format-è‡ªå®šä¹‰è¾“å‡º","link":"#ğŸ”¥-1-docker-stats-format-è‡ªå®šä¹‰è¾“å‡º","children":[]},{"level":3,"title":"ğŸ”¥ 2. docker run --initï¼ˆä½¿ç”¨ tini ä½œä¸º init è¿›ç¨‹ï¼‰","slug":"ğŸ”¥-2-docker-run-init-ä½¿ç”¨-tini-ä½œä¸º-init-è¿›ç¨‹","link":"#ğŸ”¥-2-docker-run-init-ä½¿ç”¨-tini-ä½œä¸º-init-è¿›ç¨‹","children":[]},{"level":3,"title":"ğŸ”¥ 3. docker run --read-onlyï¼ˆåªè¯»æ–‡ä»¶ç³»ç»Ÿï¼‰","slug":"ğŸ”¥-3-docker-run-read-only-åªè¯»æ–‡ä»¶ç³»ç»Ÿ","link":"#ğŸ”¥-3-docker-run-read-only-åªè¯»æ–‡ä»¶ç³»ç»Ÿ","children":[]},{"level":3,"title":"ğŸ”¥ 4. docker run --security-optï¼ˆå®‰å…¨é€‰é¡¹ï¼‰","slug":"ğŸ”¥-4-docker-run-security-opt-å®‰å…¨é€‰é¡¹","link":"#ğŸ”¥-4-docker-run-security-opt-å®‰å…¨é€‰é¡¹","children":[]},{"level":3,"title":"ğŸ”¥ 5. docker checkpointï¼ˆæ£€æŸ¥ç‚¹ä¸æ¢å¤ï¼‰","slug":"ğŸ”¥-5-docker-checkpoint-æ£€æŸ¥ç‚¹ä¸æ¢å¤","link":"#ğŸ”¥-5-docker-checkpoint-æ£€æŸ¥ç‚¹ä¸æ¢å¤","children":[]},{"level":3,"title":"ğŸ”¥ 6. docker build --squashï¼ˆå‹ç¼©é•œåƒå±‚ï¼‰","slug":"ğŸ”¥-6-docker-build-squash-å‹ç¼©é•œåƒå±‚","link":"#ğŸ”¥-6-docker-build-squash-å‹ç¼©é•œåƒå±‚","children":[]},{"level":3,"title":"ğŸ”¥ 7. docker scanï¼ˆé•œåƒæ¼æ´æ‰«æï¼‰","slug":"ğŸ”¥-7-docker-scan-é•œåƒæ¼æ´æ‰«æ","link":"#ğŸ”¥-7-docker-scan-é•œåƒæ¼æ´æ‰«æ","children":[]},{"level":3,"title":"ğŸ”¥ 8. docker contextï¼ˆå¤šç¯å¢ƒç®¡ç†ï¼‰","slug":"ğŸ”¥-8-docker-context-å¤šç¯å¢ƒç®¡ç†","link":"#ğŸ”¥-8-docker-context-å¤šç¯å¢ƒç®¡ç†","children":[]}]},{"level":2,"title":"å››ã€æœ€ä½³å®è·µå»ºè®®","slug":"å››ã€æœ€ä½³å®è·µå»ºè®®","link":"#å››ã€æœ€ä½³å®è·µå»ºè®®","children":[]},{"level":2,"title":"âœ… æ€»ç»“","slug":"âœ…-æ€»ç»“","link":"#âœ…-æ€»ç»“","children":[]}],"git":{"createdTime":1755222884000,"updatedTime":1755223143000,"contributors":[{"name":"huangcheng","email":"2387020215@qq.com","commits":2}]},"filePathRelative":"blogs/å·¥ä½œ/docker/dockerå¸¸ç”¨å‘½ä»¤.md"}');export{i as comp,l as data};
