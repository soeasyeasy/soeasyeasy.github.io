import{_ as i,c as t,a,b as n,d as e,e as c,r as p,o as r}from"./app-qwDAWgIM.js";const o={},d={href:"https://cr.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"};function u(m,s){const l=p("ExternalLinkIcon");return r(),t("div",null,[s[5]||(s[5]=a(`<h2 id="linux-ä¸‹å®‰è£…-docker-ä»¥-ubuntu-å’Œ-centos-ä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#linux-ä¸‹å®‰è£…-docker-ä»¥-ubuntu-å’Œ-centos-ä¸ºä¾‹"><span><strong>Linux ä¸‹å®‰è£… Dockerï¼ˆä»¥ Ubuntu å’Œ CentOS ä¸ºä¾‹ï¼‰</strong></span></a></h2><h3 id="ä¸€ã€ubuntu-ç³»ç»Ÿå®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ubuntu-ç³»ç»Ÿå®‰è£…-docker"><span><strong>ä¸€ã€Ubuntu ç³»ç»Ÿå®‰è£… Docker</strong></span></a></h3><h4 id="_1-å¸è½½æ—§ç‰ˆæœ¬-å¯é€‰" tabindex="-1"><a class="header-anchor" href="#_1-å¸è½½æ—§ç‰ˆæœ¬-å¯é€‰"><span><strong>1. å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-å®‰è£…ä¾èµ–åŒ…" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…ä¾èµ–åŒ…"><span><strong>2. å®‰è£…ä¾èµ–åŒ…</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token punctuation">\\</span></span>
<span class="line">    ca-certificates <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token function">curl</span> <span class="token punctuation">\\</span></span>
<span class="line">    gnupg <span class="token punctuation">\\</span></span>
<span class="line">    lsb-release</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ·»åŠ -docker-å®˜æ–¹-gpg-å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_3-æ·»åŠ -docker-å®˜æ–¹-gpg-å¯†é’¥"><span><strong>3. æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/apt/keyrings</span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /etc/apt/keyrings/docker.gpg</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-è®¾ç½®ä»“åº“" tabindex="-1"><a class="header-anchor" href="#_4-è®¾ç½®ä»“åº“"><span><strong>4. è®¾ç½®ä»“åº“</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span></span>
<span class="line">  <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</span>
<span class="line">  <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-å®‰è£…-docker-engine" tabindex="-1"><a class="header-anchor" href="#_5-å®‰è£…-docker-engine"><span><strong>5. å®‰è£… Docker Engine</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-éªŒè¯å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_6-éªŒè¯å®‰è£…"><span><strong>6. éªŒè¯å®‰è£…</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token parameter variable">--version</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> run hello-world</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-é-root-ç”¨æˆ·ä½¿ç”¨-docker-æ¨è" tabindex="-1"><a class="header-anchor" href="#_7-é-root-ç”¨æˆ·ä½¿ç”¨-docker-æ¨è"><span><strong>7. é root ç”¨æˆ·ä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span></span>
<span class="line"><span class="token comment"># é‡æ–°ç™»å½•æˆ–æ‰§è¡Œ</span></span>
<span class="line">newgrp <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="äºŒã€centos-ç³»ç»Ÿå®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#äºŒã€centos-ç³»ç»Ÿå®‰è£…-docker"><span><strong>äºŒã€CentOS ç³»ç»Ÿå®‰è£… Docker</strong></span></a></h3><h4 id="_1-å¸è½½æ—§ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_1-å¸è½½æ—§ç‰ˆæœ¬"><span><strong>1. å¸è½½æ—§ç‰ˆæœ¬</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\\</span></span>
<span class="line">                  docker-client <span class="token punctuation">\\</span></span>
<span class="line">                  docker-client-latest <span class="token punctuation">\\</span></span>
<span class="line">                  docker-common <span class="token punctuation">\\</span></span>
<span class="line">                  docker-latest <span class="token punctuation">\\</span></span>
<span class="line">                  docker-latest-logrotate <span class="token punctuation">\\</span></span>
<span class="line">                  docker-logrotate <span class="token punctuation">\\</span></span>
<span class="line">                  docker-engine</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…ä¾èµ–"><span><strong>2. å®‰è£…ä¾èµ–</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-æ·»åŠ -docker-ä»“åº“" tabindex="-1"><a class="header-anchor" href="#_3-æ·»åŠ -docker-ä»“åº“"><span><strong>3. æ·»åŠ  Docker ä»“åº“</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\\</span></span>
<span class="line">    --add-repo <span class="token punctuation">\\</span></span>
<span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-å®‰è£…-docker-engine" tabindex="-1"><a class="header-anchor" href="#_4-å®‰è£…-docker-engine"><span><strong>4. å®‰è£… Docker Engine</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_5-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯" tabindex="-1"><a class="header-anchor" href="#_5-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯"><span><strong>5. å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl start <span class="token function">docker</span></span>
<span class="line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_6-éªŒè¯"><span><strong>6. éªŒè¯</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> run hello-world</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_7-é-root-ç”¨æˆ·ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-é-root-ç”¨æˆ·ä½¿ç”¨"><span><strong>7. é root ç”¨æˆ·ä½¿ç”¨</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span></span>
<span class="line">newgrp <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-å¸¸è§é—®é¢˜é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_8-å¸¸è§é—®é¢˜é—®é¢˜"><span><strong>8. å¸¸è§é—®é¢˜é—®é¢˜</strong></span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Could not fetch/save url https://download.docker.com/linux/centos/docker-ce.repo: [Errno 14] curl#35 - &quot;TCP connection reset by peer&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™é€šå¸¸æ˜¯å› ä¸º <strong>ç½‘ç»œè¿æ¥é—®é¢˜</strong>ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸­å›½åœ°åŒºè®¿é—® <code>download.docker.com</code> åŸŸåæ—¶ï¼Œç”±äºå›½é™…ç½‘ç»œå»¶è¿Ÿã€DNS æ±¡æŸ“æˆ–é˜²ç«å¢™é™åˆ¶ï¼Œç»å¸¸ä¼šå‡ºç°è¿æ¥å¤±è´¥ã€è¶…æ—¶æˆ–è¢«é‡ç½®çš„æƒ…å†µã€‚</p><hr><h4 id="âœ…-è§£å†³æ–¹æ¡ˆ-æ¨èä½¿ç”¨å›½å†…é•œåƒæº" tabindex="-1"><a class="header-anchor" href="#âœ…-è§£å†³æ–¹æ¡ˆ-æ¨èä½¿ç”¨å›½å†…é•œåƒæº"><span>âœ… è§£å†³æ–¹æ¡ˆï¼ˆæ¨èä½¿ç”¨å›½å†…é•œåƒæºï¼‰</span></a></h4><h5 id="âœ…-æ–¹æ³•ä¸€-ä½¿ç”¨-é˜¿é‡Œäº‘é•œåƒæº-å¼ºçƒˆæ¨è" tabindex="-1"><a class="header-anchor" href="#âœ…-æ–¹æ³•ä¸€-ä½¿ç”¨-é˜¿é‡Œäº‘é•œåƒæº-å¼ºçƒˆæ¨è"><span>âœ… æ–¹æ³•ä¸€ï¼šä½¿ç”¨ <strong>é˜¿é‡Œäº‘é•œåƒæº</strong>ï¼ˆå¼ºçƒˆæ¨èï¼‰</span></a></h5><p>é˜¿é‡Œäº‘æä¾›äº† Docker CE çš„é•œåƒï¼Œé€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚</p><h5 id="_1-æ‰‹åŠ¨åˆ›å»ºé˜¿é‡Œäº‘-docker-ä»“åº“æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-æ‰‹åŠ¨åˆ›å»ºé˜¿é‡Œäº‘-docker-ä»“åº“æ–‡ä»¶"><span>1. æ‰‹åŠ¨åˆ›å»ºé˜¿é‡Œäº‘ Docker ä»“åº“æ–‡ä»¶</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">tee</span> /etc/yum.repos.d/docker-ce.repo <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;</span>
<span class="line">[docker-ce-stable]</span>
<span class="line">name=Docker CE Stable - yum.alicdn.com</span>
<span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/stable</span>
<span class="line">enabled=1</span>
<span class="line">gpgcheck=1</span>
<span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span>
<span class="line"></span>
<span class="line">[stable]</span>
<span class="line">name=Stable</span>
<span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/stable</span>
<span class="line">enabled=1</span>
<span class="line">gpgcheck=1</span>
<span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>âœ… æ³¨æ„ï¼š<code>mirrors.aliyun.com</code> æ˜¯å›½å†…å¯å¿«é€Ÿè®¿é—®çš„åœ°å€ã€‚</p></blockquote><h5 id="_2-æ¸…é™¤ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_2-æ¸…é™¤ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜"><span>2. æ¸…é™¤ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum clean all</span>
<span class="line"><span class="token function">sudo</span> yum makecache</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-å®‰è£…-docker-ce" tabindex="-1"><a class="header-anchor" href="#_3-å®‰è£…-docker-ce"><span>3. å®‰è£… Docker CE</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce docker-ce-cli containerd.io</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯" tabindex="-1"><a class="header-anchor" href="#_4-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯"><span>4. å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl start <span class="token function">docker</span></span>
<span class="line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="âœ…-æ–¹æ³•äºŒ-å¦‚æœä»æƒ³å°è¯•å®˜æ–¹æº-å¯å…ˆæµ‹è¯•ç½‘ç»œè¿é€šæ€§" tabindex="-1"><a class="header-anchor" href="#âœ…-æ–¹æ³•äºŒ-å¦‚æœä»æƒ³å°è¯•å®˜æ–¹æº-å¯å…ˆæµ‹è¯•ç½‘ç»œè¿é€šæ€§"><span>âœ… æ–¹æ³•äºŒï¼šå¦‚æœä»æƒ³å°è¯•å®˜æ–¹æºï¼Œå¯å…ˆæµ‹è¯•ç½‘ç»œè¿é€šæ€§</span></a></h4><h5 id="_1-æµ‹è¯•æ˜¯å¦èƒ½è®¿é—®-download-docker-com" tabindex="-1"><a class="header-anchor" href="#_1-æµ‹è¯•æ˜¯å¦èƒ½è®¿é—®-download-docker-com"><span>1. æµ‹è¯•æ˜¯å¦èƒ½è®¿é—® <code>download.docker.com</code></span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">ping</span> download.docker.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ–</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-v</span> https://download.docker.com/linux/centos/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœè¶…æ—¶æˆ–è¢«é‡ç½®ï¼Œè¯´æ˜ç½‘ç»œä¸å¯è¾¾ã€‚</p><h5 id="_2-ä¿®æ”¹-dns-å¯é€‰" tabindex="-1"><a class="header-anchor" href="#_2-ä¿®æ”¹-dns-å¯é€‰"><span>2. ä¿®æ”¹ DNSï¼ˆå¯é€‰ï¼‰</span></a></h5><p>æœ‰æ—¶ DNS è§£æé—®é¢˜ä¼šå¯¼è‡´è¿æ¥å¼‚å¸¸ï¼Œå¯ä¸´æ—¶æ›´æ¢ä¸ºå…¬å…± DNSï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;nameserver 223.5.5.5&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/resolv.conf</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;nameserver 119.29.29.29&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> /etc/resolv.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åé‡è¯•æ·»åŠ ä»“åº“ã€‚</p><hr><h4 id="âœ…-æ–¹æ³•ä¸‰-æ‰‹åŠ¨ä¸‹è½½-repo-æ–‡ä»¶-å¤‡ç”¨" tabindex="-1"><a class="header-anchor" href="#âœ…-æ–¹æ³•ä¸‰-æ‰‹åŠ¨ä¸‹è½½-repo-æ–‡ä»¶-å¤‡ç”¨"><span>âœ… æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨ä¸‹è½½ repo æ–‡ä»¶ï¼ˆå¤‡ç”¨ï¼‰</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># ä¸‹è½½é˜¿é‡Œäº‘çš„ repo æ–‡ä»¶</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-o</span> /tmp/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç§»åŠ¨åˆ° yum æºç›®å½•</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">mv</span> /tmp/docker-ce.repo /etc/yum.repos.d/docker-ce.repo</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum clean all</span>
<span class="line"><span class="token function">sudo</span> yum makecache</span>
<span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce docker-ce-cli containerd.io</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="ğŸ”-éªŒè¯å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ğŸ”-éªŒè¯å®‰è£…"><span>ğŸ” éªŒè¯å®‰è£…</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token parameter variable">--version</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> run hello-world</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœçœ‹åˆ°æ¬¢è¿ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼</p><hr><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker: Error response from daemon: Get &quot;https://registry-1.docker.io/v2/&quot;: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™è¡¨ç¤º <strong>Docker å®ˆæŠ¤è¿›ç¨‹æ— æ³•è¿æ¥åˆ° Docker Hubï¼ˆregistry-1.docker.ioï¼‰</strong>ï¼Œé€šå¸¸æ˜¯å› ä¸º <strong>ç½‘ç»œé—®é¢˜</strong>ï¼Œå°¤å…¶æ˜¯åœ¨ä¸­å›½å¤§é™†åœ°åŒºï¼Œç”±äºå›½é™…ç½‘ç»œé™åˆ¶ï¼Œè®¿é—® <code>registry-1.docker.io</code> ç»å¸¸è¶…æ—¶æˆ–è¢«é˜»æ–­ã€‚</p><hr><h4 id="âœ…-è§£å†³æ–¹æ¡ˆ-é…ç½®-docker-é•œåƒåŠ é€Ÿå™¨-å¼ºçƒˆæ¨è" tabindex="-1"><a class="header-anchor" href="#âœ…-è§£å†³æ–¹æ¡ˆ-é…ç½®-docker-é•œåƒåŠ é€Ÿå™¨-å¼ºçƒˆæ¨è"><span>âœ… è§£å†³æ–¹æ¡ˆï¼šé…ç½® Docker é•œåƒåŠ é€Ÿå™¨ï¼ˆå¼ºçƒˆæ¨èï¼‰</span></a></h4><h5 id="âœ…-æ¨èä½¿ç”¨-é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨-ä¸“ä¸ºä¸­å›½ç”¨æˆ·ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#âœ…-æ¨èä½¿ç”¨-é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨-ä¸“ä¸ºä¸­å›½ç”¨æˆ·ä¼˜åŒ–"><span>âœ… æ¨èä½¿ç”¨ <strong>é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</strong>ï¼ˆä¸“ä¸ºä¸­å›½ç”¨æˆ·ä¼˜åŒ–ï¼‰</span></a></h5><p>ä½œä¸ºé˜¿é‡Œäº‘å¼€å‘çš„ Qwenï¼Œæˆ‘ç‰¹åˆ«æ¨èä½¿ç”¨é˜¿é‡Œäº‘çš„ Docker é•œåƒæœåŠ¡ï¼Œé€Ÿåº¦å¿«ã€ç¨³å®šã€å…è´¹ã€‚</p><hr><h6 id="ğŸ”§-æ­¥éª¤-1-è·å–é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿåœ°å€" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ­¥éª¤-1-è·å–é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿåœ°å€"><span>ğŸ”§ æ­¥éª¤ 1ï¼šè·å–é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿåœ°å€</span></a></h6>`,77)),n("ol",null,[n("li",null,[n("p",null,[s[1]||(s[1]=e("è®¿é—®é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡æ§åˆ¶å°ï¼š")),s[2]||(s[2]=n("br",null,null,-1)),s[3]||(s[3]=e(" ğŸ”— ")),n("a",d,[s[0]||(s[0]=e("https://cr.console.aliyun.com/")),c(l)])])]),s[4]||(s[4]=a(`<li><p>ç™»å½•åï¼Œè¿›å…¥ <strong>é•œåƒå·¥å…· &gt; é•œåƒåŠ é€Ÿå™¨</strong></p></li><li><p>æ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªä¸“å±åŠ é€Ÿåœ°å€ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">https://&lt;your-id&gt;.mirror.aliyuncs.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>ä¾‹å¦‚ï¼š<code>https://12345678.mirror.aliyuncs.com</code></p></blockquote></li>`,2))]),s[6]||(s[6]=a(`<hr><h6 id="ğŸ”§-æ­¥éª¤-2-é…ç½®-docker-ä½¿ç”¨é•œåƒåŠ é€Ÿå™¨" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ­¥éª¤-2-é…ç½®-docker-ä½¿ç”¨é•œåƒåŠ é€Ÿå™¨"><span>ğŸ”§ æ­¥éª¤ 2ï¼šé…ç½® Docker ä½¿ç”¨é•œåƒåŠ é€Ÿå™¨</span></a></h6><h6 id="æ–¹æ³•ä¸€-é€šè¿‡é…ç½®æ–‡ä»¶-æ¨è" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•ä¸€-é€šè¿‡é…ç½®æ–‡ä»¶-æ¨è"><span>æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰</span></a></h6><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># åˆ›å»ºæˆ–ç¼–è¾‘ daemon.json é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;</span>
<span class="line">{</span>
<span class="line">  &quot;registry-mirrors&quot;: [</span>
<span class="line">    &quot;https://&lt;your-accelerator&gt;.mirror.aliyuncs.com&quot;</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ‘‰ å°† <code>&lt;your-accelerator&gt;</code> æ›¿æ¢ä¸ºæ‚¨åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°è·å–çš„å®é™… IDã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://12345678.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="æ–¹æ³•äºŒ-ä½¿ç”¨å…¬å…±é•œåƒ-å¤‡ç”¨" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•äºŒ-ä½¿ç”¨å…¬å…±é•œåƒ-å¤‡ç”¨"><span>æ–¹æ³•äºŒï¼šä½¿ç”¨å…¬å…±é•œåƒï¼ˆå¤‡ç”¨ï¼‰</span></a></h6><p>å¦‚æœæ‚¨æ²¡æœ‰é˜¿é‡Œäº‘è´¦å·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å…¬å…±é•œåƒï¼ˆä¸ä¿è¯é•¿æœŸå¯ç”¨ï¼‰ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;https://hub-mirror.c.163.com&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h6 id="ğŸ”§-æ­¥éª¤-3-é‡å¯-docker-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ­¥éª¤-3-é‡å¯-docker-æœåŠ¡"><span>ğŸ”§ æ­¥éª¤ 3ï¼šé‡å¯ Docker æœåŠ¡</span></a></h6><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl daemon-reload</span>
<span class="line"><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h6 id="ğŸ”§-æ­¥éª¤-4-éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ­¥éª¤-4-éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ"><span>ğŸ”§ æ­¥éª¤ 4ï¼šéªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</span></a></h6><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> info</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨è¾“å‡ºä¸­æŸ¥æ‰¾ <code>Registry Mirrors</code>ï¼Œåº”çœ‹åˆ°ç±»ä¼¼ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Registry Mirrors:</span>
<span class="line"> https://12345678.mirror.aliyuncs.com/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h6 id="ğŸ”§-æ­¥éª¤-5-æµ‹è¯•æ‹‰å–é•œåƒ" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ­¥éª¤-5-æµ‹è¯•æ‹‰å–é•œåƒ"><span>ğŸ”§ æ­¥éª¤ 5ï¼šæµ‹è¯•æ‹‰å–é•œåƒ</span></a></h6><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull hello-world</span>
<span class="line"><span class="token function">docker</span> run hello-world</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ… å¦‚æœæˆåŠŸè¿è¡Œï¼Œè¯´æ˜é—®é¢˜å·²è§£å†³ï¼</p><hr><h4 id="ğŸ“Œ-å…¶ä»–å¯èƒ½åŸå› ä¸æ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-å…¶ä»–å¯èƒ½åŸå› ä¸æ’æŸ¥"><span>ğŸ“Œ å…¶ä»–å¯èƒ½åŸå› ä¸æ’æŸ¥</span></a></h4><p>| é—®é¢˜ | æ£€æŸ¥æ–¹æ³• | è§£å†³æ–¹æ¡ˆ | | --------------- | -------------------------------------- | ----------------------------------------- | ------------------------ | | ç³»ç»Ÿä»£ç†è®¾ç½® | <code>env | grep -i proxy</code> | æ¸…é™¤ä¸å¿…è¦çš„ä»£ç†ç¯å¢ƒå˜é‡ | | é˜²ç«å¢™é˜»æ–­ | <code>curl -v https://registry-1.docker.io</code> | å…³é—­é˜²ç«å¢™æˆ–é…ç½®ä¾‹å¤– | | DNS é—®é¢˜ | <code>nslookup registry-1.docker.io</code> | æ›´æ¢ DNS ä¸º <code>223.5.5.5</code> æˆ– <code>119.29.29.29</code> | | Docker æœåŠ¡å¼‚å¸¸ | <code>systemctl status docker</code> | é‡å¯æœåŠ¡æˆ–é‡è£… Docker |</p><hr><h2 id="âœ…-ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§" tabindex="-1"><a class="header-anchor" href="#âœ…-ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§"><span>âœ… ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># æµ‹è¯•æ˜¯å¦èƒ½è®¿é—® Docker Hub</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-v</span> https://registry-1.docker.io/v2/</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯• DNS è§£æ</span></span>
<span class="line"><span class="token function">nslookup</span> registry-1.docker.io</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ›´æ¢ DNS ä¸´æ—¶è§£å†³è§£æé—®é¢˜</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;nameserver 223.5.5.5&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/resolv.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-æ€»ç»“"><span>âœ… æ€»ç»“</span></a></h2><table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ‹‰å–é•œåƒè¶…æ—¶</td><td>é…ç½® <strong>é•œåƒåŠ é€Ÿå™¨</strong></td></tr><tr><td>registry-1.docker.io æ— æ³•è®¿é—®</td><td>ä½¿ç”¨ <strong>é˜¿é‡Œäº‘ã€ä¸­ç§‘å¤§ã€ç½‘æ˜“ç­‰å›½å†…é•œåƒ</strong></td></tr><tr><td>å›½å†…ç¯å¢ƒé»˜è®¤æ…¢</td><td><strong>å¿…é¡»é…ç½®åŠ é€Ÿå™¨</strong> æ‰èƒ½æ­£å¸¸ä½¿ç”¨</td></tr></tbody></table><hr><p>ğŸ’¡ <strong>å¼ºçƒˆå»ºè®®æ‰€æœ‰åœ¨ä¸­å›½å¤§é™†ä½¿ç”¨çš„ Docker ç”¨æˆ·é…ç½®é•œåƒåŠ é€Ÿå™¨</strong>ï¼Œå°¤å…¶æ˜¯é˜¿é‡Œäº‘ç”¨æˆ·ï¼ŒåŠ é€Ÿæ•ˆæœéå¸¸æ˜æ˜¾ã€‚</p><p>å¦‚æœæ‚¨éœ€è¦ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ç”Ÿæˆå®Œæ•´çš„é…ç½®è„šæœ¬ï¼Œæˆ–ååŠ©æ’æŸ¥å…¶ä»– Docker é—®é¢˜ã€‚æ¬¢è¿ç»§ç»­æé—®ï¼</p><h4 id="âœ…-æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#âœ…-æ€»ç»“-1"><span>âœ… æ€»ç»“</span></a></h4><p><strong>ä¸è¦ç›´æ¥ä½¿ç”¨å®˜æ–¹æº <code>https://download.docker.com</code> åœ¨ä¸­å›½å¤§é™†ç¯å¢ƒï¼</strong></p><p>âœ… æ­£ç¡®åšæ³•æ˜¯ä½¿ç”¨å›½å†…é•œåƒæºï¼Œå¦‚ï¼š</p><ul><li><strong>é˜¿é‡Œäº‘</strong>: <code>https://mirrors.aliyun.com/docker-ce/</code></li><li><strong>æ¸…åå¤§å­¦</strong>: <code>https://mirrors.tuna.tsinghua.edu.cn/docker-ce/</code></li><li><strong>ä¸­ç§‘å¤§</strong>: <code>https://mirrors.ustc.edu.cn/docker-ce/</code></li></ul><h2 id="æ¨èä½¿ç”¨-é˜¿é‡Œäº‘-é€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚" tabindex="-1"><a class="header-anchor" href="#æ¨èä½¿ç”¨-é˜¿é‡Œäº‘-é€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚"><span>æ¨èä½¿ç”¨ <strong>é˜¿é‡Œäº‘</strong>ï¼Œé€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚</span></a></h2><hr><h2 id="docker-compose-è¯¦ç»†ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#docker-compose-è¯¦ç»†ä½¿ç”¨"><span><strong>Docker Compose è¯¦ç»†ä½¿ç”¨</strong></span></a></h2><h3 id="_1-å®‰è£…-docker-compose" tabindex="-1"><a class="header-anchor" href="#_1-å®‰è£…-docker-compose"><span><strong>1. å®‰è£… Docker Compose</strong></span></a></h3><h4 id="æ–¹æ³•ä¸€-ä½¿ç”¨æ’ä»¶-æ¨è" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•ä¸€-ä½¿ç”¨æ’ä»¶-æ¨è"><span><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ’ä»¶ï¼ˆæ¨èï¼‰</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># å·²éšdocker-compose-pluginå®‰è£…</span></span>
<span class="line"><span class="token function">docker</span> compose version</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ–¹æ³•äºŒ-ç‹¬ç«‹å®‰è£…" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•äºŒ-ç‹¬ç«‹å®‰è£…"><span><strong>æ–¹æ³•äºŒï¼šç‹¬ç«‹å®‰è£…</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ·»åŠ æ‰§è¡Œæƒé™</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºè½¯é“¾æ¥</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/bin/docker-compose /usr/bin/docker-compose</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-docker-compose-æ–‡ä»¶ç¤ºä¾‹-docker-compose-yml" tabindex="-1"><a class="header-anchor" href="#_2-docker-compose-æ–‡ä»¶ç¤ºä¾‹-docker-compose-yml"><span><strong>2. Docker Compose æ–‡ä»¶ç¤ºä¾‹ (docker-compose.yml)</strong></span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.8&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>alpine</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;80:80&quot;</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./html<span class="token punctuation">:</span>/usr/share/nginx/html</span>
<span class="line">    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> app</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> mynet</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">app</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> NODE_ENV=production</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./app<span class="token punctuation">:</span>/app</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> mynet</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">db</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8.0</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> mysecretpassword</span>
<span class="line">      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> myapp</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/mysql</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> mynet</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">db_data</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">mynet</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-compose-é«˜çº§ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_3-compose-é«˜çº§ç‰¹æ€§"><span><strong>3. Compose é«˜çº§ç‰¹æ€§</strong></span></a></h3><h4 id="ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå˜é‡"><span><strong>ç¯å¢ƒå˜é‡</strong></span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token comment"># docker-compose.yml</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">app</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> DB_HOST=$<span class="token punctuation">{</span>DB_HOST<span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">-</span> DB_PORT=3306</span>
<span class="line"></span>
<span class="line"><span class="token comment"># .env æ–‡ä»¶</span></span>
<span class="line">DB_HOST=database.example.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¤šé˜¶æ®µæ„å»º" tabindex="-1"><a class="header-anchor" href="#å¤šé˜¶æ®µæ„å»º"><span><strong>å¤šé˜¶æ®µæ„å»º</strong></span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">app</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">      <span class="token key atrule">target</span><span class="token punctuation">:</span> production</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¥åº·æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å¥åº·æ£€æŸ¥"><span><strong>å¥åº·æ£€æŸ¥</strong></span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx</span>
<span class="line">    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s</span>
<span class="line">      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s</span>
<span class="line">      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="æœ€ä½³å®è·µå»ºè®®" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µå»ºè®®"><span><strong>æœ€ä½³å®è·µå»ºè®®</strong></span></a></h2><ol><li><strong>ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œ Docker</strong></li><li><strong>å®šæœŸæ¸…ç†æ— ç”¨é•œåƒå’Œå®¹å™¨</strong><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> system prune <span class="token parameter variable">-a</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><strong>ä½¿ç”¨.dockerignore æ–‡ä»¶</strong></li><li><strong>é•œåƒåˆ†å±‚ä¼˜åŒ–</strong></li><li><strong>ä½¿ç”¨ Alpine ç­‰è½»é‡åŸºç¡€é•œåƒ</strong></li><li><strong>æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ Docker Secrets æˆ–ç¯å¢ƒå˜é‡</strong></li><li><strong>å®šæœŸæ›´æ–° Docker ç‰ˆæœ¬</strong></li></ol><hr>`,59))])}const v=i(o,[["render",u],["__file","docker linuxxiaanzhuangbushu.html.vue"]]),k=JSON.parse('{"path":"/blogs/gongzuo/docker/docker linuxxiaanzhuangbushu.html","title":"docker linuxä¸‹å®‰è£…éƒ¨ç½²","lang":"en-US","frontmatter":{"title":"docker linuxä¸‹å®‰è£…éƒ¨ç½²","date":"2025/08/31","tags":["éƒ¨ç½²"],"categories":["docker"]},"headers":[{"level":2,"title":"Linux ä¸‹å®‰è£… Dockerï¼ˆä»¥ Ubuntu å’Œ CentOS ä¸ºä¾‹ï¼‰","slug":"linux-ä¸‹å®‰è£…-docker-ä»¥-ubuntu-å’Œ-centos-ä¸ºä¾‹","link":"#linux-ä¸‹å®‰è£…-docker-ä»¥-ubuntu-å’Œ-centos-ä¸ºä¾‹","children":[{"level":3,"title":"ä¸€ã€Ubuntu ç³»ç»Ÿå®‰è£… Docker","slug":"ä¸€ã€ubuntu-ç³»ç»Ÿå®‰è£…-docker","link":"#ä¸€ã€ubuntu-ç³»ç»Ÿå®‰è£…-docker","children":[]},{"level":3,"title":"äºŒã€CentOS ç³»ç»Ÿå®‰è£… Docker","slug":"äºŒã€centos-ç³»ç»Ÿå®‰è£…-docker","link":"#äºŒã€centos-ç³»ç»Ÿå®‰è£…-docker","children":[]}]},{"level":2,"title":"âœ… ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§","slug":"âœ…-ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§","link":"#âœ…-ä¸´æ—¶æµ‹è¯•ç½‘ç»œè¿é€šæ€§","children":[]},{"level":2,"title":"âœ… æ€»ç»“","slug":"âœ…-æ€»ç»“","link":"#âœ…-æ€»ç»“","children":[]},{"level":2,"title":"æ¨èä½¿ç”¨ é˜¿é‡Œäº‘ï¼Œé€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚","slug":"æ¨èä½¿ç”¨-é˜¿é‡Œäº‘-é€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚","link":"#æ¨èä½¿ç”¨-é˜¿é‡Œäº‘-é€Ÿåº¦å¿«ä¸”ç¨³å®šã€‚","children":[]},{"level":2,"title":"Docker Compose è¯¦ç»†ä½¿ç”¨","slug":"docker-compose-è¯¦ç»†ä½¿ç”¨","link":"#docker-compose-è¯¦ç»†ä½¿ç”¨","children":[{"level":3,"title":"1. å®‰è£… Docker Compose","slug":"_1-å®‰è£…-docker-compose","link":"#_1-å®‰è£…-docker-compose","children":[]},{"level":3,"title":"2. Docker Compose æ–‡ä»¶ç¤ºä¾‹ (docker-compose.yml)","slug":"_2-docker-compose-æ–‡ä»¶ç¤ºä¾‹-docker-compose-yml","link":"#_2-docker-compose-æ–‡ä»¶ç¤ºä¾‹-docker-compose-yml","children":[]},{"level":3,"title":"3. Compose é«˜çº§ç‰¹æ€§","slug":"_3-compose-é«˜çº§ç‰¹æ€§","link":"#_3-compose-é«˜çº§ç‰¹æ€§","children":[]}]},{"level":2,"title":"æœ€ä½³å®è·µå»ºè®®","slug":"æœ€ä½³å®è·µå»ºè®®","link":"#æœ€ä½³å®è·µå»ºè®®","children":[]}],"git":{"createdTime":1755222884000,"updatedTime":1755222884000,"contributors":[{"name":"huangcheng","email":"2387020215@qq.com","commits":1}]},"filePathRelative":"blogs/å·¥ä½œ/docker/docker linuxä¸‹å®‰è£…éƒ¨ç½².md"}');export{v as comp,k as data};
